<html>
    <head>
        <meta charset="utf-8" />
    </head>



    <style>
    .orientationReading {
        background-color: #302020;
        color: white;
        border-radius: 2em;
        width: 4em;
        height: 1em;
        text-align: center;
        font-size:1em;
    }
    </style>



    <body>
        <div>
            <h1>Hello there</h1>
            <p>
                how are you doing today?<br />
                it seems you have come accross my server.
            </p>
            <a id="connectionStatus">Not Connected</a>
            <div id='orientationReading' class='orientationReading'>
            </div>

            <div id="console">

            </div>
            <a href="/sensor">Sensor</a>
            <a href="/vr">WebVR</a>
            <a href="/anchor">Anchor</a><br /><br />
            <a href="/x">Placing</a>
        </div>
    </body>



    <script>

    // +===============================+
    // |          WebSocket            |
    // +===============================+
    var ws = new WebSocket('ws://localhost:3000', ['soap', 'xmpp']);

    ws.onopen = function() {
        ws.send("ping");
        document.getElementById("connectionStatus").innerHTML = "Connected";
    }

    ws.onerror = function(error) {
        console.log("Websocket Error:", error);
    }

    ws.onmessage = function(e) {
        console.log("Server:", e.data);
    }

    function sendToServer(message) {
        if (typeof(message) === "string") {
            ws.send(message);
        }
        else if (typeof(message) === "object") {
            ws.send(JSON.stringify(message));
        }
    }


    // +===============================+
    // |         Device Setup          |
    // +===============================+

    if (window.DeviceMotionEvent) {
        window.addEventListener("devicemotion", motion, false);
    }
    else {
        document.getElementById('console').innerHTML += "No Device Motion<br />";
    }

    function motion(event) {
        document.getElementById("orientationReading").innerHTML = event.accelerationIncludingGravity.x.toString() + ", " + event.accelerationIncludingGravity.y.toString() + ", " + event.accelerationIncludingGravity.z.toString();

    }

    </script>
</html>
